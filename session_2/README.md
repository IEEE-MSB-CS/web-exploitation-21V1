# HTTP and the Web

### Table of contents

- what is HTTP?
- Different Versions
- CURL & Netcat
- Capturing Traffic using Wireshark
- HTTP methods and
-

####

####

#### Task:

-
-
-

#### More Readings

# HTTP

- client-server based architecture
  web server is serving some resources
- Request-Response model to serve resources
  Resources are indetified by URI/URL
- version - HTTP 1.0/1.1:
  1.0 one resource per connection
  the key difference is 1.1 can reuse connection for multiple URIs

- How it really works?
  client --> server --> database.

## exercise

open sudo wireshark and start captureing the eth0
open your terminal
curl -v www.google.com

the task is to identify the request parameter and response and be able to read the wireshark
and identify the three way handshake

the same host can go ahead and serves multiple domains

## Netcat

swiss army knife replacement for telnet

```bash
nc www.secutitytube.net
GET / HTTP/1.0
Host: www.securitytube.net
```

notice that the conenction closed after the response

![image]('../imgs/wireshark.png')

```bash

nc www.secutitytube.net
GET / HTTP/1.1
Host: www.securitytube.net
```

notice that we can now serve multiple resources per one connection.
![image]('../imgs/wireshark.png')

Summary:

- what is HTTP?
- How to capture requests
- What is the difference between 1.0 and 1.1

# HTTP methods and verb tampering

Verb tampering is ended up because some misconfiguration.

method: an operation to tell the server do something with the request.
[GET, POST, OPTIONS, HEAD, TRACE, PUT, DELETE, etc..];

-GET
-parameter in URL
-POST - Form submissions, data in message body -> suitable for sending bigger data [images, files, and so on]
-OPTIONS
-list of methods supported for URL
not every webserver has it enabled

```bash
curl -v -X OPTIONS www.securitytube.net

output:
*   Trying 142.250.203.243:80...
* TCP_NODELAY set
* Connected to www.securitytube.net (142.250.203.243) port 80 (#0)
> OPTIONS / HTTP/1.1
> Host: www.securitytube.net
> User-Agent: curl/7.68.0
> Accept: */*
>
* Mark bundle as not supporting multiuse
< HTTP/1.1 405 Method Not Allowed
< Allow: GET
< Content-Type: text/html; charset=UTF-8
< X-Cloud-Trace-Context: d61463f3d9092a8f7f8f01c6c9d03122
< Date: Thu, 25 Nov 2021 03:49:35 GMT
< Server: Google Frontend
< Content-Length: 191
<
<html>
 <head>
  <title>405 Method Not Allowed</title>
 </head>
 <body>
  <h1>405 Method Not Allowed</h1>
  The method OPTIONS is not allowed for this resource. <br /><br />

 </body>
* Connection #0 to host www.securitytube.net left intact
</html>%
```

if the attacket knows what the url accepts as methods, can launch specific attacks
it's not a security vulenrability, you can call it information disclosure

- HEAD
- Response for GET but no message body

```bash
curl -v -X POST www.securitytube.net

Warning: Setting custom HTTP method to HEAD with -X/--request may not work the
Warning: way you want. Consider using -I/--head instead.
*   Trying 142.251.37.51:80...
* TCP_NODELAY set
* Connected to www.securitytube.net (142.251.37.51) port 80 (#0)
> HEAD / HTTP/1.1
> Host: www.securitytube.net
> User-Agent: curl/7.68.0
> Accept: */*
>
* Mark bundle as not supporting multiuse
< HTTP/1.1 405 Method Not Allowed
< Allow: GET
< Content-Type: text/html; charset=UTF-8
< X-Cloud-Trace-Context: 9a8c1229d992e2ac225c5330509ad772
< Content-Length: 188
< Date: Thu, 25 Nov 2021 03:54:13 GMT
< Server: Google Frontend
```

- TRACE
  -Echo client request back for diagnostics
- PUT
  - Store in URI
- DELETE
  - Delete resource

Exercise

- find appropiate Nmap NSE scripts which test for HTTP verp tampering
- find appopriate metasploit module for the same
- Do a demo and send it back to me

## HTTP method testing with Nmap, Metasploit

1-using metasploit

2-using nmap
if you don't know which scripts are available,

```bash
cd /use/share/nmap/script
```

or you can search the documentation.

```bash
nmap --script=http-methods.nse 0.0.0.0 -n -p 80
Starting Nmap 7.80 ( https://nmap.org ) at 2021-11-25 06:05 EET
Nmap scan report for 0.0.0.0
Host is up (0.00014s latency).

PORT   STATE SERVICE
80/tcp open  http
| http-methods:
|_  Supported Methods: POST OPTIONS HEAD GET

Nmap done: 1 IP address (1 host up) scanned in 0.31 seconds
```

## DEMO: HTTP verb tampering

.htacess misconfiguration

```
AuthType Basic
AuthName 'Restricted Files'
AuthUserFile /etc/apache2/passwords

<Limit POST>
Require valid-user
</Limit>
```

# HTTP BasicAuthentication

# HTTP Digest

# Http statelessness cookie
